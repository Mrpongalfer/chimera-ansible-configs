# File: roles/prometheus/templates/prometheus.yml.j2
# Version: Added Node Exporter scrape job

global:
  scrape_interval: 15s
  evaluation_interval: 15s

# Configuration for Alertmanager (Placeholder for future use)
# alerting:
#   alertmanagers:
#     - static_configs:
#         - targets: ['alertmanager:9093'] # Assumes resolvable name

# Location of rule files (Placeholder for future use)
# rule_files:
#   - /etc/prometheus/rules/*.rules.yml

scrape_configs:
  - job_name: 'prometheus'
    # Scrape Prometheus itself (running in Docker on server)
    static_configs:
      - targets: ['localhost:9090']

  - job_name: 'node_exporter'
    # Scrape Node Exporter running on hosts defined in inventory
    static_configs:
      - targets:
          # Server Host (aiseed) - Using direct IP for clarity
          - '192.168.0.95:{{ node_exporter_port | default(9100) }}'
          # Client Host (pong) - Using direct IP for clarity
          - '192.168.0.96:{{ node_exporter_port | default(9100) }}'
        # Optionally add labels per target if needed
        # labels:
        #   instance: '{{ inventory_hostname }}' # Example label

# --- Add other scrape jobs below as needed ---
